{% extends 'charts/base.html' %}

{% block header %}
<title>Moneroj.net - Bitcoin Comparison</title>
{% endblock %}

{% block content %}

<!-- Content Wrapper -->
<div id="content-wrapper" style="background-color:rgb(48, 44, 41)">

    <!-- Content Row -->
    <div class="row" style="height: 700; margin: 10px 10px 10px 10px;">
        <div class="card" id="graph1" style="width: 100%; height: 100%;">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between text-white">
                <h6 class="m-0 text-light">
                    Total Blockchain Size for Monero and Bitcoin (KB)
                </h6>
                
                <div class="dropdown no-arrow">
                    <a data-toggle="modal" href="#" class="link_graph" data-target="#id_Modal">
                        About this chart?
                    </a>
                    <a class="dropdown-toggle" href="#" role="button"
                        onclick="$('#graph1').toggleClass('fullscreen');window.dispatchEvent(new Event('resize'));">
                        <i class="bx bx-expand text-gray-400"></i>
                    </a>
                </div>
            </div>
            <div class="card-body"  style="width: 100%; height: 100%; margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;">
                <div id="graph"  style="width: 100%; height: 100%;  margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;"></div>
            </div>
        </div>
    </div>

    <!-- Content Row -->
    <div class="row" style="height: 700; margin: 10px 10px 10px 10px;">
        <div class="card" id="graph2" style="width: 100%; height: 100%;">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between text-white">
                <h6 class="m-0 text-light">
                    Comparison to Bitcoin (aligned)
                </h6>
                
                <div class="dropdown no-arrow">
                    <a data-toggle="modal" href="#" class="link_graph" data-target="#id_Modal">
                        About this chart?
                    </a>
                </div>
            </div>
            <div class="card-body"  style="width: 100%; height: 100%; margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;">
                <div id="graph3" style="width: 100%; height: 100%;  margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;"></div>
            </div>
        </div>
    </div>

</div>
<!-- End of Content Wrapper -->



<!-- Modal -->
<div class="modal fade" id="id_Modal" tabindex="-1" role="dialog" aria-labelledby="Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="Modal">Help about the chart</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Cancelar">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                These three charts show the comparison between Bitcoin's and Monero's prices since inception. On the
                first chart, both coins are compared with the X axis being the current
                date those prices happened. For the second chart, I placed both first local tops at the "day zero", and
                it is easily visible how both coins are very similar. While BTC took 900
                days to achieve 37x return, Monero took 1279 days to give 95x return. Since Monero's cycle is longer in
                days because it somewhat depends on how much time Bitcoin's bull market
                will take to finnish (and each cycle takes more time than the previous), Monero's return in one whole
                bull market was much better than Bitcoin's. I plotted this chart in order
                to make evident how the narrative that "Bitcoin is better any other coins" can be somehow too narrow.
                The last chart has a distorted time scale to show how both coins
                look very much like the other, and in fact it seems Monero is printing a fractal from Bitcoin's second
                cycle... but with a better return on capital.<br>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- Fim do Modal -->

<!-- Page level plugins -->
<script> 

    var data1 = {
        type: "scatter",
        mode: "lines",
        name: 'Bitcoin Return on Capital',
        x: {{ dates2|safe }},
        y: {{ btc2|safe }},
        line: {
            color: '#dcdf30'
            ,width: 3
        }
    };
    
    var data1_mobile = {
        type: "scatter",
        mode: "lines",
        name: 'Bitcoin Return on Capital',
        x: {{ dates2|safe }},
        y: {{ btc2|safe }},
        line: {
            color: '#dcdf30'
            ,width: 2
        }
    };

    var data2 = {
        type: "scatter",
        mode: "lines",
        name: 'Monero Return on Capital',
        x: {{ dates2|safe }},
        y: {{ xmr2|safe }},
        line: {
            color: '#dd1d1d'
            ,width: 3
        }
    };
    
    
    var data2_mobile = {
        type: "scatter",
        mode: "lines",
        name: 'Monero Return on Capital',
        x: {{ dates2|safe }},
        y: {{ xmr2|safe }},
        line: {
            color: '#dd1d1d'
            ,width: 2
        }
    };

    var data4 = {
        type: "scatter",
        mode: "lines",
        name: 'Bitcoin Return on Capital',
        x: {{ dates|safe }},
        y: {{ btc|safe }},
        line: {
            color: '#dcdf30'
            ,width: 2
        }
    };
    
    var data4_mobile = {
        type: "scatter",
        mode: "lines",
        name: 'Bitcoin Return on Capital',
        x: {{ dates|safe }},
        y: {{ btc|safe }},
        line: {
            color: '#dcdf30'
            ,width: 2
        }
    };

    var data5 = {
        type: "scatter",
        mode: "lines",
        name: 'Monero Return on Capital',
        x: {{ dates4|safe }},
        y: {{ xmr3|safe }},
        line: {
            color: '#dd1d1d'
            ,width: 2
        }
    };
    
    var data5_mobile = {
        type: "scatter",
        mode: "lines",
        name: 'Monero Return on Capital',
        x: {{ dates4|safe }},
        y: {{ xmr3|safe }},
        line: {
            color: '#dd1d1d'
            ,width: 2
        }
    };

    var data = [data2, data1];
    var data_2 = [data4, data5];
    var data_mobile = [data2_mobile, data1_mobile];
    var data_mobile_2 = [data4_mobile, data5_mobile];

    var layout = {
        plot_bgcolor:"#252221",
        paper_bgcolor:"#252221",
        annotations: [
        {
            xref: 'paper',
            yref: 'paper',
            x: 0.50,
            xanchor: 'auto',
            y: 0.02,
            yanchor: 'auto',
            text: 'Trocador<br>https://www.trocador.app',
            showarrow: false,
            borderwidth: 1,
            bordercolor: '#5f5f5f',
            bgcolor: '#333333',
            borderpad: 5,
            align: 'center',
            font: {
            color: "white",
            size: 12
            }
        }],
        separators: ",.",
        legend: {
            x: 0.98, 
            y: 0.02, 
            bgcolor: '#333333', 
            bordercolor: '#5f5f5f', 
            borderwidth: 1, 
            font: {
                color: 'white', 
                size: 12
            }, 
            traceorder: 'normal', 
            xanchor: 'auto', 
            yanchor: 'auto'
        },
        hoverlabel: {
            namelength: -1
        },
        yaxis: {
            type: "log",
            title: {
                text: 'Multiple from previous top',
                font: {
                    size: 20,
                    color: 'white'
                }
            },
            tickformat :",.2f"
            ,nticks: 10
            ,tickfont: {
                color: "#ffffff"
                ,size: 12
            }
            ,gridcolor: "#333333"
        },
        xaxis: {
            hoverformat: "%Y-%m-%d",
            showgrid: true,
            type: 'date',
            nticks: 10
            ,tickfont: {
                color: "#dddddd"
                ,size: 13
            }
            ,gridcolor: "#333333"
            ,range: ['2011-01-01', '2024-06-01']
            ,zeroline: true
        },
        margin: {
            l: 120,
            r: 60,
            b: 35,
            t: 10,
            pad: 4
        }
    };

    var layout2 = {
      plot_bgcolor:"#252221",
        paper_bgcolor:"#252221",
        annotations: [
        {
            xref: 'paper',
            yref: 'paper',
            x: 0.50,
            xanchor: 'auto',
            y: 0.02,
            yanchor: 'auto',
            text: 'Moneroj',
            showarrow: false,
            borderwidth: 1,
            bordercolor: '#5f5f5f',
            bgcolor: '#333333',
            borderpad: 5,
            align: 'center',
            font: {
            color: "white",
            size: 12
            }
        }],
        separators: ",.",
        legend: {
            x: 0.98, 
            y: 0.02, 
            bgcolor: '#333333', 
            bordercolor: '#5f5f5f', 
            borderwidth: 1, 
            font: {
                color: 'white', 
                size: 12
            }, 
            traceorder: 'normal', 
            xanchor: 'auto', 
            yanchor: 'auto'
        },
        hoverlabel: {
            namelength: -1
        },
        yaxis: {
            type: "log",
            title: {
                text: 'Multiple from previous top',
                font: {
                    size: 20,
                    color: 'white'
                }
            },
            tickformat :",.2f"
            ,nticks: 10
            ,tickfont: {
                color: "#ffffff"
                ,size: 12
            }
            ,gridcolor: "#333333"
        },
        xaxis: {
            hoverformat: ",.0f",
            showgrid: true,
            type: 'number',
            nticks: 10
            ,tickfont: {
                color: "#dddddd"
                ,size: 13
            }
            ,gridcolor: "#333333"
            ,range: ['0', '4400']
            ,zeroline: true
        },
        margin: {
            l: 120,
            r: 60,
            b: 35,
            t: 10,
            pad: 4
        }
    };
    
    var layout_mobile = {
        plot_bgcolor:"black",
        paper_bgcolor:"black",
        separators: ",.",
        hoverlabel: {
            namelength: -1
        },
        legend: {
            x: 0.98, 
            y: 0.05, 
            bgcolor: '#000000', 
            bordercolor: '#5f5f5f', 
            borderwidth: 1, 
            font: {
                color: 'white', 
                size: 5
            }, 
            traceorder: 'normal', 
            xanchor: 'auto', 
            yanchor: 'auto'
        },
        showlegend: false,
        yaxis: {
            type: "log",
            tickformat :",.2f"
            ,nticks: 10
            ,tickfont: {
                color: "#ffffff"
                ,size: 7
            }
            ,gridcolor: "#444444"
        },
        xaxis: {
            hoverformat: "%Y",
            showgrid: true,
            type: 'date',
            nticks: 10
            ,tickfont: {
                color: "#dddddd"
                ,size: 7
            }
            ,gridcolor: "#444444"
            ,range: ['2011-01-01', '2024-06-01']
            ,zeroline: true
        },
        margin: {
            l: 40,
            r: 0,
            b: 35,
            t: 10,
            pad: 0
        }
    };

    var layout2_mobile = {
        plot_bgcolor:"black",
        paper_bgcolor:"black",
        separators: ",.",
        hoverlabel: {
            namelength: -1
        },
        legend: {
            x: 0.98, 
            y: 0.05, 
            bgcolor: '#000000', 
            bordercolor: '#5f5f5f', 
            borderwidth: 1, 
            font: {
                color: 'white', 
                size: 5
            }, 
            traceorder: 'normal', 
            xanchor: 'auto', 
            yanchor: 'auto'
        },
        showlegend: false,
        yaxis: {
            type: "log",
            tickformat :",.2f"
            ,nticks: 10
            ,tickfont: {
                color: "#ffffff"
                ,size: 7
            }
            ,gridcolor: "#444444"
        },
        xaxis: {
            hoverformat: ",.0f",
            showgrid: true,
            type: 'number',
            nticks: 10
            ,tickfont: {
                color: "#dddddd"
                ,size: 13
            }
            ,gridcolor: "#333333"
            ,range: ['0', '4200']
            ,zeroline: true
        },
        margin: {
            l: 40,
            r: 0,
            b: 35,
            t: 10,
            pad: 0
        }
    };

    function findBootstrapEnvironment() {
        let envs = ['xs', 'sm', 'md', 'lg', 'xl'];

        let el = document.createElement('div');
        document.body.appendChild(el);

        let curEnv = envs.shift();

        for (let env of envs.reverse()) {
            el.classList.add(`d-${env}-none`);

            if (window.getComputedStyle(el).display === 'none') {
                curEnv = env;
                break;
            }
        }

        document.body.removeChild(el);
        return curEnv;

    }
    env_size = findBootstrapEnvironment();
    if (env_size == "xs") {
        document.getElementById("graph1").style.height="350px";
        Plotly.newPlot('graph', data_mobile, layout_mobile, {responsive: true, modeBarButtonsToRemove: ['toImage', 'hoverCompareCartesian', 'hoverClosest2d', 'toggleSpikelines', 'lasso2d', 'select2d', 'hoverClosestCartesian'], displaylogo: false});
        document.getElementById("graph2").style.height="350px";
        Plotly.newPlot('graph3', data_mobile_2, layout2_mobile, {responsive: true, modeBarButtonsToRemove: ['toImage', 'hoverCompareCartesian', 'hoverClosest2d', 'toggleSpikelines', 'lasso2d', 'select2d', 'hoverClosestCartesian'], displaylogo: false});
    }
    else {
        document.getElementById("graph1").style.height="700px";
        Plotly.newPlot('graph', data, layout, {responsive: true, modeBarButtonsToRemove: ['toImage', 'hoverCompareCartesian', 'hoverClosest2d', 'toggleSpikelines', 'lasso2d', 'select2d', 'hoverClosestCartesian'], displaylogo: false});
        document.getElementById("graph2").style.height="700px";
        Plotly.newPlot('graph3', data_2, layout2, {responsive: true, modeBarButtonsToRemove: ['toImage', 'hoverCompareCartesian', 'hoverClosest2d', 'toggleSpikelines', 'lasso2d', 'select2d', 'hoverClosestCartesian'], displaylogo: false});
    }
  </script>

{% endblock %}